# –¢—É—Ç–æ—Ä–∏–∞–ª 7: –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å (H-MEM)

–°–æ–∑–¥–∞–≤–∞–π—Ç–µ AI-—Å–∏—Å—Ç–µ–º—ã —Å —á–µ–ª–æ–≤–µ–∫–æ–ø–æ–¥–æ–±–Ω–æ–π –ø–∞–º—è—Ç—å—é –Ω–∞ –æ—Å–Ω–æ–≤–µ 4-—É—Ä–æ–≤–Ω–µ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

## –ß—Ç–æ —Ç–∞–∫–æ–µ H-MEM?

H-MEM ‚Äî —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä–∞—è:

- **4 —É—Ä–æ–≤–Ω—è –ø–∞–º—è—Ç–∏**: –≠–ø–∏–∑–æ–¥ ‚Üí –¢—Ä–µ–π—Å ‚Üí –ö–∞—Ç–µ–≥–æ—Ä–∏—è ‚Üí –î–æ–º–µ–Ω
- **LLM-–∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—è–º
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏**: –ü–æ–º–Ω–∏—Ç –º–µ–∂–¥—É —Ä–∞–∑–≥–æ–≤–æ—Ä–∞–º–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ó–æ–Ω—ã –¥–æ–≤–µ—Ä–∏—è –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ H-MEM

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    4-—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ H-MEM                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ  –£—Ä–æ–≤–µ–Ω—å 0: –≠–ø–∏–∑–æ–¥    ‚îÇ –°—ã—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –≤—ã—Å–æ–∫–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ "User: –ú–µ–Ω—è –∑–æ–≤—É—Ç –ê–ª–µ–∫—Å, —è –∏–Ω–∂–µ–Ω–µ—Ä –≤ Google"               ‚îÇ
‚îÇ           ‚Üì –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è (–∫–∞–∂–¥—ã–µ N —ç–ø–∏–∑–æ–¥–æ–≤)                    ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  –£—Ä–æ–≤–µ–Ω—å 1: –¢—Ä–µ–π—Å     ‚îÇ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–µ–º–µ/—Å—É—â–Ω–æ—Å—Ç–∏            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ {entity: "–ê–ª–µ–∫—Å", facts: [–∏–Ω–∂–µ–Ω–µ—Ä, Google, ...]}           ‚îÇ
‚îÇ           ‚Üì –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è (–∫–∞–∂–¥—ã–µ N —Ç—Ä–µ–π—Å–æ–≤)                     ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  –£—Ä–æ–≤–µ–Ω—å 2: –ö–∞—Ç–µ–≥–æ—Ä–∏—è ‚îÇ –°—É–º–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏                 ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –≤ big tech"         ‚îÇ
‚îÇ           ‚Üì –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è (–∫–∞–∂–¥—ã–µ N –∫–∞—Ç–µ–≥–æ—Ä–∏–π)                   ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  –£—Ä–æ–≤–µ–Ω—å 3: –î–æ–º–µ–Ω     ‚îÇ –ú–µ—Ç–∞-–∑–Ω–∞–Ω–∏—è / –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è"‚îÇ
‚îÇ                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

```bash
pip install rlm-toolkit[all]
export OPENAI_API_KEY=your-key
```

## –®–∞–≥ 1: –ë–∞–∑–æ–≤—ã–π H-MEM

```python
from rlm_toolkit import RLM
from rlm_toolkit.memory import HierarchicalMemory

# –°–æ–∑–¥–∞—ë–º H-MEM
memory = HierarchicalMemory()

rlm = RLM.from_openai("gpt-4o", memory=memory)

# –í–µ–¥—ë–º —Ä–∞–∑–≥–æ–≤–æ—Ä
rlm.run("–ü—Ä–∏–≤–µ—Ç, —è –°–∞—Ä–∞. –†–∞–±–æ—Ç–∞—é –¥–∞—Ç–∞-—Å–∞–π–µ–Ω—Ç–∏—Å—Ç–æ–º –≤ Netflix.")
rlm.run("–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.")
rlm.run("–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é Python –∏ TensorFlow.")

# –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è
result = rlm.run("–ß—Ç–æ —Ç—ã –∑–Ω–∞–µ—à—å –æ–±–æ –º–Ω–µ?")
print(result.final_answer)
# "–í—ã –°–∞—Ä–∞, –¥–∞—Ç–∞-—Å–∞–π–µ–Ω—Ç–∏—Å—Ç –≤ Netflix, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç–µ—Å—å –Ω–∞
#  —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ Python –∏ TensorFlow."
```

## –®–∞–≥ 2: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏

```python
from rlm_toolkit.memory import HierarchicalMemory, HMEMConfig

config = HMEMConfig(
    # –õ–∏–º–∏—Ç—ã —É—Ä–æ–≤–Ω–µ–π –¥–æ –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏
    episode_limit=50,     # –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —ç–ø–∏–∑–æ–¥—ã –ø–æ—Å–ª–µ 50
    trace_limit=20,       # –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–π—Å—ã –ø–æ—Å–ª–µ 20
    category_limit=10,
    domain_limit=5,
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏
    consolidation_enabled=True,
    consolidation_threshold=20,   # –¢—Ä–∏–≥–≥–µ—Ä –Ω–∞ 20 —ç–ø–∏–∑–æ–¥–∞—Ö
    consolidation_llm=None,       # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π LLM
    
    # –õ–∏–º–∏—Ç—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    max_context_tokens=4000,      # –ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤ –≤ –ø—Ä–æ–º–ø—Ç–µ
)

memory = HierarchicalMemory(config=config)
```

## –®–∞–≥ 3: –†—É—á–Ω–∞—è –∏–Ω—Å–ø–µ–∫—Ü–∏—è —É—Ä–æ–≤–Ω–µ–π

```python
from rlm_toolkit.memory import HierarchicalMemory

memory = HierarchicalMemory()
rlm = RLM.from_openai("gpt-4o", memory=memory)

# –ü–æ—Å–ª–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞...

# –ò–Ω—Å–ø–µ–∫—Ç–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å
print("–£—Ä–æ–≤–µ–Ω—å —ç–ø–∏–∑–æ–¥–æ–≤:")
for episode in memory.get_episodes(limit=5):
    print(f"  {episode.content[:100]}...")

print("\n–£—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–π—Å–æ–≤:")
for trace in memory.get_traces():
    print(f"  {trace.topic}: {trace.summary}")

print("\n–£—Ä–æ–≤–µ–Ω—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π:")
for category in memory.get_categories():
    print(f"  {category.name}: {category.description}")

print("\n–£—Ä–æ–≤–µ–Ω—å –¥–æ–º–µ–Ω–∞:")
domain = memory.get_domain()
print(f"  {domain.profile}")
```

## –®–∞–≥ 4: –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

```python
from rlm_toolkit.memory import HierarchicalMemory

# –°–µ—Å—Å–∏—è 1: –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
memory = HierarchicalMemory(
    persist_directory="./user_memories/user_123",
    auto_save=True
)

rlm = RLM.from_openai("gpt-4o", memory=memory)
rlm.run("–ó–∞–ø–æ–º–Ω–∏, —á—Ç–æ —è –ª—é–±–ª—é –ø–æ—Ö–æ–¥—ã –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é")
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ

# –°–µ—Å—Å–∏—è 2: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ
memory2 = HierarchicalMemory(
    persist_directory="./user_memories/user_123"
)

rlm2 = RLM.from_openai("gpt-4o", memory=memory2)
result = rlm2.run("–ö–∞–∫–∏–µ –º–æ–∏ —Ö–æ–±–±–∏?")
# "–í–∞—à–∏ —Ö–æ–±–±–∏ –≤–∫–ª—é—á–∞—é—Ç –ø–æ—Ö–æ–¥—ã –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é!"
```

## –®–∞–≥ 5: –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π H-MEM —Å –∑–æ–Ω–∞–º–∏ –¥–æ–≤–µ—Ä–∏—è

```python
from rlm_toolkit.memory import SecureHierarchicalMemory

memory = SecureHierarchicalMemory(
    # –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
    encryption_key="your-256-bit-key-here",
    
    # –ó–æ–Ω–∞ –¥–æ–≤–µ—Ä–∏—è
    trust_zone="confidential",  # public, internal, confidential, secret
    
    # –ê—É–¥–∏—Ç
    audit_enabled=True,
    audit_log_path="./memory_audit.log",
    
    persist_directory="./secure_memory"
)

rlm = RLM.from_openai("gpt-4o", memory=memory)

# –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
rlm.run("–ú–æ–π –ò–ù–ù 123-456-789")  # –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
```

## –®–∞–≥ 6: –°–æ–≤–º–µ—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏

```python
from rlm_toolkit.memory import HierarchicalMemory, SharedMemoryPool

# –°–æ–∑–¥–∞—ë–º –æ–±—â–∏–π –ø—É–ª –ø–∞–º—è—Ç–∏
pool = SharedMemoryPool(
    trust_level="internal",
    sync_interval=30  # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
)

# –ê–≥–µ–Ω—Ç 1: –°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
agent1_memory = HierarchicalMemory(
    agent_id="customer_service",
    shared_pool=pool,
    share_levels=[2, 3]  # –î–µ–ª–∏–º—Å—è —Ç–æ–ª—å–∫–æ Category –∏ Domain
)

# –ê–≥–µ–Ω—Ç 2: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
agent2_memory = HierarchicalMemory(
    agent_id="tech_support",
    shared_pool=pool,
    share_levels=[2, 3]
)

# –û–±–∞ –∞–≥–µ–Ω—Ç–∞ –¥–µ–ª—è—Ç—Å—è –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
# –ù–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –¥–µ—Ç–∞–ª–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏
```

## –®–∞–≥ 7: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è

```python
from rlm_toolkit.memory import HierarchicalMemory, ConsolidationStrategy

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–º–ø—Ç—ã –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏
class CustomConsolidator(ConsolidationStrategy):
    def consolidate_episodes_to_trace(self, episodes):
        """–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏ —ç–ø–∏–∑–æ–¥–æ–≤."""
        prompt = f"""–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç–∏ —ç–ø–∏–∑–æ–¥—ã —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –∏ –∏–∑–≤–ª–µ–∫–∏:
        1. –ö–ª—é—á–µ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
        2. –í–∞–∂–Ω—ã–µ —Ñ–∞–∫—Ç—ã
        3. –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        
        –≠–ø–∏–∑–æ–¥—ã:
        {episodes}
        
        –í—ã–≤–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON."""
        
        return self.llm.generate(prompt)
    
    def consolidate_traces_to_category(self, traces):
        """–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —Ç—Ä–µ–π—Å–æ–≤."""
        # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –∑–¥–µ—Å—å
        pass

memory = HierarchicalMemory(
    consolidation_strategy=CustomConsolidator()
)
```

## –ü–æ–ª–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç

```python
# personal_assistant.py
from rlm_toolkit import RLM
from rlm_toolkit.memory import HierarchicalMemory, HMEMConfig
from rlm_toolkit.tools import Calculator, WebSearch, DateTimeTool
import os

class PersonalAssistant:
    def __init__(self, user_id: str):
        self.user_id = user_id
        self.memory_path = f"./memories/{user_id}"
        
        # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º H-MEM
        config = HMEMConfig(
            episode_limit=100,
            consolidation_enabled=True,
            consolidation_threshold=25
        )
        
        self.memory = HierarchicalMemory(
            config=config,
            persist_directory=self.memory_path,
            auto_save=True
        )
        
        # –°–æ–∑–¥–∞—ë–º RLM —Å –ø–∞–º—è—Ç—å—é –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
        self.rlm = RLM.from_openai(
            "gpt-4o",
            memory=self.memory,
            tools=[Calculator(), WebSearch(), DateTimeTool()],
            system_prompt=self._create_system_prompt()
        )
    
    def _create_system_prompt(self):
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
        domain = self.memory.get_domain()
        
        base = """–¢—ã –ø–æ–ª–µ–∑–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.
–¢—ã –ø–æ–º–Ω–∏—à—å –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
–ò—Å–ø–æ–ª—å–∑—É–π –∑–Ω–∞–Ω–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤."""
        
        if domain and domain.profile:
            base += f"\n\n–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:\n{domain.profile}"
        
        return base
    
    def chat(self, message: str) -> str:
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞."""
        result = self.rlm.run(message)
        return result.final_answer
    
    def get_memory_stats(self) -> dict:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–∞–º—è—Ç–∏."""
        return {
            "episodes": len(self.memory.get_episodes()),
            "traces": len(self.memory.get_traces()),
            "categories": len(self.memory.get_categories()),
            "has_domain": self.memory.get_domain() is not None
        }
    
    def forget(self, topic: str = None):
        """–í—ã–±–æ—Ä–æ—á–Ω–æ–µ –∑–∞–±—ã–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏."""
        if topic:
            self.memory.forget_topic(topic)
        else:
            self.memory.clear()

def main():
    import sys
    user_id = sys.argv[1] if len(sys.argv) > 1 else "default"
    
    print(f"üß† –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è {user_id}")
    print("   –ö–æ–º–∞–Ω–¥—ã: '—Å—Ç–∞—Ç', '–∑–∞–±—ã—Ç—å', '–≤—ã—Ö–æ–¥'\n")
    
    assistant = PersonalAssistant(user_id)
    
    while True:
        user_input = input("–í—ã: ").strip()
        
        if not user_input:
            continue
        
        if user_input in ['–≤—ã—Ö–æ–¥', 'quit']:
            break
        
        if user_input in ['—Å—Ç–∞—Ç', 'stats']:
            stats = assistant.get_memory_stats()
            print(f"üìä –ü–∞–º—è—Ç—å: {stats}")
            continue
        
        if user_input.startswith('–∑–∞–±—ã—Ç—å'):
            topic = user_input[6:].strip() or None
            assistant.forget(topic)
            print("üßπ –ü–∞–º—è—Ç—å –æ—á–∏—â–µ–Ω–∞")
            continue
        
        response = assistant.chat(user_input)
        print(f"–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç: {response}\n")

if __name__ == "__main__":
    main()
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

!!! tip "–ü–æ—Ä–æ–≥ –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏"
    –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —á–∞—Å—Ç–æ—Ç—ã —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤:
    - –í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞: 50-100 —ç–ø–∏–∑–æ–¥–æ–≤
    - –ù–∏–∑–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞: 10-20 —ç–ø–∏–∑–æ–¥–æ–≤

!!! tip "–ó–æ–Ω—ã –¥–æ–≤–µ—Ä–∏—è"
    –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∑–æ–Ω—ã:
    - `public`: –ù–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ, –º–æ–∂–Ω–æ –¥–µ–ª–∏—Ç—å—Å—è
    - `internal`: –ë–∏–∑–Ω–µ—Å-–¥–∞–Ω–Ω—ã–µ
    - `confidential`: –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    - `secret`: –í—ã—Å–æ–∫–æ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

!!! tip "–û—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏"
    –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É:
    ```python
    memory.cleanup_old_episodes(days=30)
    ```

!!! warning "–•—Ä–∞–Ω–∏–ª–∏—â–µ"
    H-MEM —Ä–∞—Å—Ç—ë—Ç —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –¥–∏—Å–∫–æ–≤—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –∏ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [–¢—É—Ç–æ—Ä–∏–∞–ª 8: Self-Evolving](08-self-evolving.md)
- [–ö–æ–Ω—Ü–µ–ø—Ü–∏—è: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ H-MEM](../concepts/hmem.md)
- [–ö–æ–Ω—Ü–µ–ø—Ü–∏—è: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](../concepts/security.md)
